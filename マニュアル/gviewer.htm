<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 6.5.0.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE></TITLE>
</HEAD>
<BODY>
<P><FONT size="+2"><B>Ground Viewer</B></FONT></P>
<P><BR>
プログラムなしで、地面データをチェック出来るように、<BR>
GViewer.exeを作りました。<BR>
<BR>
地面データの作り方は、<A href="e3dhsp_ground.htm">地面データの作り方のページ</A>をご覧ください。<BR>
<BR>
このページでは、GViewerの使い方を説明します。<BR>
GViewerは、ダイアログに値を入れることによって、<BR>
地面データを表示します。<BR>
<BR>
以下に、それぞれのダイアログの説明を、簡単に書きます。<BR>
<BR>
<BR>
<IMG src="jpegfiles/gviewer_bmpdlg.jpg" width="558" height="492" border="0"><BR>
<BR>
地面ＢＭＰ読み込みダイアログは、メインウインドウの、<BR>
File メニューから、表示させます。<BR>
E3DLoadGroundBMP関数に渡す、引数を、設定してください。<BR>
<BR>
<BR>
<BR>
<IMG src="jpegfiles/gviewer_projdlg.jpg" width="245" height="270" border="0"><BR>
<BR>
プロジェクション設定ダイアログは、<BR>
メインウインドウの、Setting メニューから表示させます。<BR>
クリッピング距離と、視野角を指定してください。<BR>
<BR>
</P>
<P><BR>
<IMG src="jpegfiles/gviewer_viewdlg.jpg" width="281" height="575" border="0"><BR>
<BR>
Viewの設定ダイアログは、<BR>
メインウインドウの、Setting　メニューから表示させます。<BR>
視点の座標、角度、あたり判定のモードを指定してください。<BR>
地面を這うモードの時には、地面からの高さも指定してください。<BR>
<BR>
<BR>
<BR>
<IMG src="jpegfiles/gviewer_bbrandom.jpg" width="321" height="518" border="0"><BR>
<BR>
ビルボードランダム配置ダイアログでは、<BR>
指定したテクスチャのビルボードを、任意の個数分、<BR>
ランダムな位置に、作成します。<BR>
<BR>ビルボードの作成は、何回も、実行出来ますが、<BR>
（ビルボードの総数が１５００を超えるまでは、）<BR>
前回指定したテクスチャと同じファイル名だった場合は、<BR>
テクスチャの作り直しは、行われません。<BR>
<BR>
そのため、一度、透過モードを間違えてセットしてしまった場合は、<BR>
次回に、同じテクスチャファイルで、透過モードを変更しても、変更は反映されません。<BR>
透過モードを指定し間違えた場合は、<BR>
gviewer.exeをもう一度、起動し直さないと、直りません。<BR>
<BR>
黒透過モードは、R=0, G=0, B=0 の色の部分のアルファをゼロにします。<BR>
R=1, G=1, B=0 などの黒色は、表示されてしまいますので、<BR>
注意してください。<BR>
<BR>
<U>黒透過モードを使う場合は、<BR>
ファイルの大きさを、２５６の倍数にする</U>ことをおすすめします。<BR>
２５６の倍数でないテクスチャーは、DirectXでの読み込みの際に、<BR>
データの伸張や補間が行われて、<BR>
R=1, G=1, B=0 などの黒色が、生じてしまうからです。<BR>
<BR>
<BR>
<IMG src="jpegfiles/gviewer_bgdlg.jpg" width="373" height="373" border="0"></P>
<P>背景指定ダイアログでは、<BR>
背景に表示する２Ｄ画像の指定を行います。<BR>
<BR>
２枚目は、１枚目とモジュレートされて表示されます。<BR>
２枚目は、指定しなくてもかまいません。<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<B>ファイル出力</B><BR>
　　メインウインドウの&quot;File&quot;メニューから、&quot;地面のＭＱＯ出力&quot;　と　&quot;地面のスクリプト出力&quot;　を実行することが出来ます。<BR>
<BR>
　　&quot;<U>地面のＭＱＯ出力</U>&quot;では、 地面データは、８００ポリゴンを目安（今後、変更されるかもしれません）に、<BR>
　　オブジェクトに分けられて出力されます。<BR>
　　ビルボード情報は、出力されません。<BR>
<BR>
　　&quot;<U>地面のスクリプト出力</U>&quot;では、Easy3D For HSPで、読み込み可能な、スクリプトファイルを出力します。<BR>
　　ビルボード情報も、出力されます。<BR>
　　ver1.0.0.6からは、ナビラインの情報も出力されます。<BR>
<BR>
<BR>
　　”移動可能領域の出力”では、移動可能領域を、メタセコイアのＭＱＯ形式で、出力することが出来ます。<BR>
　　（当たり前ですが。。、移動可能領域を、読み込み済のときに、限ります。）<BR>
<B><BR>
ファイル入力</B><BR>
　　メインウインドウの&quot;File&quot;メニューの、&quot;地面データの読み込み&quot;メニューから、３種類の入力方法を選ぶことが出来ます。<BR>
　　<BR>
　　&quot;<U>BMPファイルからの読み込み</U>&quot;では、ＢＭＰの濃淡データから、地面データ、移動可能領域を読み込みます。<BR>
　　<BR>
　　&quot;<U>MQOファイルからの読み込み</U>&quot;では、mqo を、地面データ、移動可能領域として読み込むことが出来ます。<BR>
<BR>
　　&quot;<U>GViewerスクリプトからの読み込み</U>&quot;では、GViewerの、&quot;地面のスクリプト出力&quot;メニューで、出力したファイルを読み込みます。<BR>
　　　　ver1.0.0.3では、<BR>
　　　　E3DLoadGroundBMP、E3DLoadMQOFileAsGround、E3DCreateBillboard、E3DSetBillboardPos、<BR>
　　　　E3DSetMovableArea　(<B>ver1.0.0.4で追加</B>)、E3DLoadMQOFileAsMovableArea　(<B>ver1.0.0.4で追加</B>)、<BR>
　　　　E3DAddNaviPoint（<B>ver1.0.0.6で追加</B>）、E3DSetNaviPointPos（<B>ver1.0.0.6で追加</B>）<BR>
　　　　の8つの命令を読み込むことが出来ます。<BR>
<BR>
　　　　基本的には、GViewerで出力したものだけを、読み込むことを想定していますが、<BR>
　　　　決まりを守れば、手で編集したスクリプトを、読み込ませることも出来ます。<BR>
<BR>
　　　　注意点としては、<BR>
　　　　１，　１行に、１命令。<BR>
　　　　２，　座標には、変数ではなく、数値を記述する。<BR>
　　　　３，　ファイル名は、&quot;&quot;で囲まれた文字列であること。<BR>
　　　　４，　引数の省略は、不可。<BR>
　　　　５，　hsid は、変数、または、数値のどちらかに、統一すること。<BR>
　　　　６，　地面データは、一つしか、読み込めません。（一番最後に読み込んだものだけ、有効）<BR>
　　　　７，　<U>curdir + &quot;ファイル名&quot; で記述されたスクリプトを読む場合は、</U><BR>
　　　　　　　<U>gviewer.exeと同じディレクトリに、ファイルが無いとエラーになります。</U><BR>
　　　　８，　<U>小数点の使用は、不可</U>です。整数のみを使用してください。<BR>
<BR>
　　　　GViewerのスクリプトの入出力の方法について、詳しく知りたい方は、<BR>
　　　　GViewerのzip の中の、ソースファイル（GVScript.h, GVScript.cpp）に、コードが書いてあるので、<BR>
　　　　参照してください。</P>
<P><BR>
</P>
<P><B>メタセコイアで、移動可能領域の作成をする際の注意</B><BR>
　　メタセコイアで、移動可能領域のデータを作る場合には、次の２点に気を付けてください。<BR>
      <BR>
　　１．壁データは、<U>常に、移動可能領域の内側を向く</U>ように、面の向きを設定してください。<U>両面ポリゴンは、不可</U>です。<BR>
      <BR>
　　２．壁データは、少しの隙間もないように、作成してください。<BR>
      <BR>
</P>
<P><B>ビルボードの個別編集</B></P>
<P>　　ビルボードを、一個ずつ、画面で指定した位置に、作成したり、削除したり出来ます。<BR>
　　<BR>
　　ビルボードを作成する場合は、メインウインドウの、&quot;ビルボード&quot;メニューの中の、&quot;ビルボード編集モードの設定&quot;メニューを選びます。<BR>
　　すると、下図のような、ダイアログが表示されます。<BR>
<BR>
<IMG src="jpegfiles/gviewer_bbmode.jpg" width="635" height="252" border="0"></P>
<P>　　ビルボードのAddモードを選択します。<BR>
　　すると、３Ｄ画面上に、座標軸の形をした、オブジェクトが、表示されます。<BR>
　　下図、参照。<BR>
<IMG src="jpegfiles/gviewer_axis.jpg" width="487" height="377" border="0"><BR>
<BR>
　　矢印キーで、座標軸オブジェクトを、ビルボードを配置したい場所に、移動して、<BR>
　　Shft キーと　A キーを同時に押すと、<BR>
　　その場所に、ビルボードを作成することが出来ます。<BR>
<BR>
<BR>
　　ビルボードを、一個ずつ、削除したい場合は、<BR>
　　ビルボード編集モードの設定ダイアログで、”ビルボードDelモード”を選びます。<BR>
　　矢印キーで、削除したいビルボードの近くに、座標軸オブジェクトを移動させると、<BR>
　　座標軸オブジェクトに、一番近いビルボードが、点滅します。<BR>
<BR>
　　この状態で、Shift キー　と　R キーを同時に押すと、<BR>
　　点滅していたビルボードを、削除することが出来ます。<BR>
<BR>
<BR>
<BR>
</P>
<P>　<BR>
<BR>
<IMG src="jpegfiles/gviewer_ver1002.jpg" width="643" height="520" border="0"><BR>
<BR>
上の図は、GViewerの実行画面です。<BR>
矢印キーで移動できます。<BR>
<BR>
<BR>
Shift + D キーで、ビューの位置や角度、ＦＰＳなどが、確認できます。<BR>
<BR>
ver1.0.0.2からは、<BR>
ビルボードとカメラとの、あたり判定が付いています。<BR>
ぶつかって動けない場合は、矢印キーで、向きを変えて、移動してください。<BR>
<BR>
木に囲まれると、動けなくなっちゃいます（笑）<BR>
そんなときは、Settingメニューの、Viewの設定ダイアログで、<BR>
あたり判定を、”空を飛ぶモード”にして、<BR>
Ｙ座標の値に（地面からの高さの項目ではなく、上から２番目の項目です）、<BR>
ビルボードの高さより、高い座標値をセットすると、<BR>
脱出できます。<BR>
<BR>
</P>
<P><B>ナビライン、ナビポイントの編集<BR>
</B><BR>
<B>ナビポイント</B>とは、キャラクターを自動操縦するときに、<BR>
位置の基準となる点のことです。<BR>
<BR>
ナビポイントを、双方向につなげたリストを、<B>ナビライン</B>と呼ぶことにします。<BR>
<BR>
GViewerでは、一度に一本のナビラインを編集できます。<BR>
一本のナビラインには、最大１０００個まで、ナビポイントを格納することが出来ます。<BR>
<BR>
まずは、ナビポイントを数個作ったときの画面をご覧ください。<BR>
<BR>
<IMG src="jpegfiles/gv_npedit.jpg" width="645" height="524" border="0"><BR>
<BR>
<BR>
作成したナビポイントは、分かりやすいように、円柱型のモデルとして、表示されます。<BR>
円柱には、ナビポイントを一意に識別するＩＤの下１桁の数字が、<BR>
テクスチャーとして、貼られています。<BR>
見やすいように、円柱は、回転します。<BR>
<BR>
ナビポイントの編集をしたいときは、”ナビポイント”メニューの<U>”ナビポイントの編集モードの設定”メニュー</U>を選びます。<BR>
<BR>
<IMG src="jpegfiles/gv_npmode.jpg" width="650" height="227" border="0"><BR>
<BR>
ビルボードの編集と同じように、AddモードやDelモードを選ぶと、<BR>
Shift + A, Shift + R キーで、ナビポイントの追加、削除が出来るようになります。<BR>
<BR>
おおまかな間隔で、ナビポイントを作成したら、<BR>
”ナビポイント”メニューの<U>”ナビポイントを補間する”メニュー</U>で、<BR>
ナビポイントとナビポイントの間に、補間により新しいナビポイントを作成することが出来ます。<BR>
<BR>
<IMG src="jpegfiles/gv_npfillup.jpg" width="205" height="176" border="0"><BR>
<BR>
ダイアログで、分割数を指定するだけでＯＫです。<BR>
<BR>
補間により、ナビポイントを作成すると、ナビポイントが、地面に潜ってしまうことがあります。<BR>
そんなときは、”ナビポイント”メニューの<U>”全てのナビポイントを地面の高さにセットする”メニュー</U>を選択してください。<BR>
<BR>
また、補間を行うと、ポイントＩＤがチェインの順番と異なってしまいます。<BR>
わかりにくくなってしまった場合には、<BR>
”ナビポイント”メニューの<U>”ナビポイントの番号をふり直す”メニュー</U>を選択してください。<BR>
チェインと同じ順番に、ぽいんとＩＤがふり直されます。<BR>
<BR>
<BR>
<B><BR>
環境設定</B><BR>
<BR>
GViewerの動作環境によっては、移動単位が大きすぎると感じたり、<BR>
小さすぎると感じたりすることがあると思います。<BR>
<BR>
なので、矢印キーを押したときの、移動距離の大きさと、角度の変化量を設定できるようにしました。<BR>
”環境設定”メニューの<U>”Viewの移動量の設定”めにゅー</U>を選ぶと下のダイアログが出て、設定できるようになります。<BR>
<BR>
<IMG src="jpegfiles/gv_viewstep.jpg" width="271" height="243" border="0"><BR>
</P>
<P><BR>
<BR>
<BR>
</P>
<P>GViewerは、Easy3Dを使用して作られています。<BR>
zipには、実行ファイルの他にも、<BR>
Visual Studio .Netのプロジェクトファイル( ATLベース )と、<BR>
ソースコードが入っています。<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<B>ver1.0.0.2での変更点</B><BR>
　　メニューから、ビルボードと背景の、作成と削除が出来るようになりました。<BR>
　　メタセコイア（mqo） 出力機能が付きました。<BR>
<BR>
<BR>
<BR>
<B>ver1.0.0.3での変更点</B><BR>
　　書き出し機能の拡張。<BR>
　　　　Easy3D For HSPで、読み込み可能な、スクリプト出力を追加。<BR>
　　　　　　スクリプトには、ビルボードの情報を書き出すことも可能となりました。<BR>
<BR>
　　読み込み機能の拡張。<BR>
　　　　mqo ファイルを、地面データとして、読み込むことが、可能となりました。<BR>
　　　　GViewerで、書き出した、スクリプト（ビルボード情報を含む）を、読み込む機能が付きました。<BR>
　　　　<BR>
　　ビルボードを、一個ずつ、画面で指定した位置に、作成、削除、出来るようになりました。<BR>
<BR>
　　全てのビルボードを、地面の高さに再配置する機能の追加。<BR>
　　　　&quot;ビルボード&quot; メニューのなかの、”全てのビルボードを地面の高さに再配置する”メニューを選ぶことで、<BR>
　　　　実行できます。<BR>
　　　　<BR>
<BR>
<B>ver1.0.0.4での変更点</B><BR>
　　移動可能領域の入出力<BR>
　　　　MQO、スクリプトに対応。<BR>
　　　　　　FILEメニューに、移動可能領域の読み込み、出力メニューが追加されました。<BR>
<BR>
　　壁スリ移動の実装<BR>
　　　　移動可能領域を読み込むと、自動的に、領域の外に出ないように（外から内は可）、<BR>
　　　　カメラの位置座標と、カメラの角度を制御します。<BR>
<BR>
<B>ver1.0.0.5での変更点</B><BR>
　　Easy3D の新しいバージョン（ver2.0.1.7）に対応するための、<BR>
　　マイナーチェンジ<BR>
　　　　E3DInit, E3DBye に引数が追加されたことなどに、対応しました。<BR>
<BR>
<BR>
<B>ver1.0.0.6での変更点</B><BR>
　　スクリプト読み込み時に、ファイルが見つからなかったときの処理を修正。<BR>
　　ナビライン作成、操作、保存、読み込みのための機能を追加。<BR>
　　視点の移動量を変更できるようにした。<BR>
<BR>
<B>ver1.0.0.7での変更点</B><BR>
　　Easy3D の更新に伴う、バージョンアップ。<BR>
　　地面データとビルボード表示が、欠けたり、くにゃくにゃしなくなりました。<BR>
<BR>
<BR>
<B>ver1.0.0.8での変更点</B><BR>
　　地面のスクリプト出力機能に、Ｃ言語用のコードを出力するモードを追加しました。<BR>
<BR>
<BR>
<B>ver1.0.0.9での変更点</B><BR>
　　Windows 95、Windows 98、および Windows NT 4 で、実行した場合に、<BR>
　　ダイアログの日本語が、文字化けする不具合があったので、修正しました。<BR>
　　「MS Shell Dlg」指定から、「ＭＳ ゴシック」指定に変更しました。<BR>
<BR>
<BR>
<BR>
<BR>
<B>ダウンロード</B><BR>
<BR>
<BR>
<A href="zipfiles/gviewer_ver1009.zip">GViewer ver1.0.0.9 with マニュアル、ソースプロジェクト　（2145KB）のダウンロード</A><BR>
<BR>
<BR>
！！！　Visual Studio.Net などの開発環境をインストールしていない方や、<BR>
！！！　実行時に、ＤＬＬが足りないとメッセージが出た方は、<BR>
！！！　以下のファイルも必要となります。（msvcr70.dllと、msvcrt.dl lが入っています。）<BR>
！！！　解凍後、gviewer.exeと同じフォルダに、コピーしてください。<BR>
</P>
<P><A href="zipfiles/WinDll_msvcr_70.zip">必要なWindowsのＤＬＬ、MSVCR70_DLL のダウンロード</A><BR>
</P>
<P><BR>
<A href="e3dhsp.htm">Easy3D For HSPのページに戻る</A><BR>
<BR>
<A href="easy3d.htm">Easy3D のページに戻る</A></P>
<P><A href="index.htm">トップページに戻る</A></P>
</BODY>
</HTML>